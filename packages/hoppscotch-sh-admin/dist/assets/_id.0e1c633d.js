import{o as v,c as f,f as r,d as Z,l as T,J as se,E as re,K as ie,D as Y,m as oe,a as m,F as le,i as ce,s as N,k as ue,h as de,p as ae,g as d,z as J,y as X,b as De,e as ee,r as ye,n as Ae,w as P,q as ge,S as fe,L as Ee,C as Te,x as te,H as Ue,T as Ne,V as Se,W as je,G as xe,t as ne,P as Le,v as Ve,u as Oe,X as Pe,j as Be,Y as He,I as We}from"./index.2e7559f1.js";import{I as be}from"./trash.69394371.js";import{e as me,f as Fe,U as qe,g as W,c as Ke,A as ze,h as Ye,i as Qe,j as Ge,d as Ze}from"./graphql.3ddfc347.js";import{I as Je}from"./plus.17497381.js";import{u as Xe,I as et}from"./usePagedQuery.cc46e68d.js";import{I as pe}from"./user-plus.0738aef0.js";import{I as tt}from"./user-minus.c61c28a5.js";globalThis&&globalThis.__spreadArray;var nt={_tag:"None"},ot=function(e){return{_tag:"Some",value:e}},at=function(e){return e._tag==="Left"},st=function(e){return{_tag:"Left",left:e}},rt=function(e){return{_tag:"Right",right:e}};const it={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},lt=r("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3m.08 4h.01"})],-1),ct=[lt];function ut(e,t){return v(),f("svg",it,ct)}const ve={name:"lucide-help-circle",render:ut},dt={class:"border rounded divide-y divide-dividerLight border-divider my-8"},mt={key:0,class:"flex items-center justify-center p-4"},vt={key:1},ft={key:0,class:"divide-y divide-dividerLight"},pt=["name","value"],ht=["name","value"],_t={class:"flex"},yt={key:1,class:"flex flex-col items-center justify-center p-4 text-secondaryLight"},gt=r("span",{class:"text-center"}," No pending invites ",-1),Tt=[gt],xt={key:2,class:"flex flex-col items-center p-4"},bt=Z({__name:"PendingInvites",setup(e){const t=J(),o=T(!0),n=T(!1),{client:a}=se(),i=re(),l=T(),s=T(),_=async()=>{var j;o.value=!0;const $=await a.query(me,{teamID:i.params.id.toString()}).toPromise();if($.error)return n.value=!0,t.error("Unable to load team details..");(j=$.data)!=null&&j.admin.teamInfo&&(l.value=$.data.admin.teamInfo,s.value=l.value.teamInvitations),o.value=!1};ie(async()=>await _());const k=T(null),V=Y(Fe),g=$=>V.executeMutation({inviteID:$}),B=async($,j)=>{k.value=j,(await g($)).error?t.error("Removal of invitee failed!!"):s.value&&(s.value=s.value.filter(O=>O.id!==$),t.success("Removal of invitee is successfull!!")),k.value=null};return($,j)=>{var C;const E=de,O=X,H=ve,x=oe("tippy");return v(),f("div",dt,[o.value?(v(),f("div",mt,[m(E)])):(v(),f("div",vt,[l.value?(v(),f("div",ft,[(v(!0),f(le,null,ce(s.value,(M,p)=>(v(),f("div",{key:`invitee-${p}`,class:"flex divide-x divide-dividerLight"},[M?(v(),f("input",{key:0,class:"flex flex-1 px-4 py-2 bg-transparent text-secondaryLight",placeholder:"Email",name:"param"+p,value:M.inviteeEmail,readonly:""},null,8,pt)):N("",!0),r("input",{class:"flex flex-1 px-4 py-2 bg-transparent text-secondaryLight",placeholder:"Permissions",name:"value"+p,value:M.inviteeRole,readonly:""},null,8,ht),r("div",_t,[ae(m(O,{title:"Remove",icon:d(be),color:"red",loading:k.value===p,onClick:c=>B(M.id,p)},null,8,["icon","loading","onClick"]),[[x,{theme:"tooltip"}]])])]))),128))])):N("",!0),l.value&&((C=s.value)==null?void 0:C.length)===0?(v(),f("div",yt,Tt)):N("",!0),!o.value&&n.value?(v(),f("div",xt,[m(H,{class:"mb-4 svg-icons"}),ue(" Something went wrong. Please try again later. ")])):N("",!0)]))])}}});var we=nt,ke=ot;function wt(e){return function(t){return e(t)?ke(t):we}}var kt=function(e){return function(t){return Ie(t)?we:ke(e(t.value))}},Ie=function(e){return e._tag==="None"},It=st,$t=rt,$e=at,h=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function n(){this.constructor=t}t.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}}(),he=globalThis&&globalThis.__assign||function(){return he=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},he.apply(this,arguments)};globalThis&&globalThis.__spreadArrays;var Rt=It,L=function(e,t,o){return Rt([{value:e,context:t,message:o}])},S=$t,y=function(){function e(t,o,n,a){this.name=t,this.is=o,this.validate=n,this.encode=a,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,o){var n=this;return o===void 0&&(o="pipe("+this.name+", "+t.name+")"),new e(o,t.is,function(a,i){var l=n.validate(a,i);return $e(l)?l:t.validate(l.right,i)},this.encode===D&&t.encode===D?D:function(a){return n.encode(t.encode(a))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(t){return this.validate(t,[{key:"",type:this,actual:t}])},e}(),D=function(e){return e};function Mt(e){return e.displayName||e.name||"<function"+e.length+">"}var Ct=function(e){h(t,e);function t(){var o=e.call(this,"null",function(n){return n===null},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="NullType",o}return t}(y);new Ct;var Dt=function(e){h(t,e);function t(){var o=e.call(this,"undefined",function(n){return n===void 0},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="UndefinedType",o}return t}(y),_e=new Dt,At=function(e){h(t,e);function t(){var o=e.call(this,"void",_e.is,_e.validate,D)||this;return o._tag="VoidType",o}return t}(y);new At;var Et=function(e){h(t,e);function t(){var o=e.call(this,"unknown",function(n){return!0},S,D)||this;return o._tag="UnknownType",o}return t}(y);new Et;var Ut=function(e){h(t,e);function t(){var o=e.call(this,"string",function(n){return typeof n=="string"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="StringType",o}return t}(y),Nt=new Ut,St=function(e){h(t,e);function t(){var o=e.call(this,"number",function(n){return typeof n=="number"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="NumberType",o}return t}(y),Re=new St,jt=function(e){h(t,e);function t(){var o=e.call(this,"bigint",function(n){return typeof n=="bigint"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="BigIntType",o}return t}(y);new jt;var Lt=function(e){h(t,e);function t(){var o=e.call(this,"boolean",function(n){return typeof n=="boolean"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="BooleanType",o}return t}(y);new Lt;var Vt=function(e){h(t,e);function t(){var o=e.call(this,"UnknownArray",Array.isArray,function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="AnyArrayType",o}return t}(y);new Vt;var Ot=function(e){h(t,e);function t(){var o=e.call(this,"UnknownRecord",function(n){var a=Object.prototype.toString.call(n);return a==="[object Object]"||a==="[object Window]"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="AnyDictionaryType",o}return t}(y);new Ot;(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.value=l,s._tag="LiteralType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.keys=l,s._tag="KeyofType",s}return t})(y);var Pt=function(e){h(t,e);function t(o,n,a,i,l,s){var _=e.call(this,o,n,a,i)||this;return _.type=l,_.predicate=s,_._tag="RefinementType",_}return t}(y);function Me(e,t,o){return Ce(e,t,o)}Me(Re,function(e){return Number.isInteger(e)},"Int");var Bt=function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.runDefinition=l,s._tag="RecursiveType",s}return t}(y);Object.defineProperty(Bt.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.type=l,s._tag="ArrayType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.props=l,s._tag="InterfaceType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.props=l,s._tag="PartialType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l,s){var _=e.call(this,o,n,a,i)||this;return _.domain=l,_.codomain=s,_._tag="DictionaryType",_}return t})(y);var Ht=function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.types=l,s._tag="UnionType",s}return t}(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.types=l,s._tag="IntersectionType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.types=l,s._tag="TupleType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.type=l,s._tag="ReadonlyType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.type=l,s._tag="ReadonlyArrayType",s}return t})(y);(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.type=l,s._tag="ExactType",s}return t})(y);var Wt=function(e){h(t,e);function t(){var o=e.call(this,"Function",function(n){return typeof n=="function"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="FunctionType",o}return t}(y);new Wt;(function(e){h(t,e);function t(o,n,a,i,l,s){var _=e.call(this,o,n,a,i,l)||this;return _.tag=s,_}return t})(Ht);var Ft=function(e){h(t,e);function t(){var o=e.call(this,"never",function(n){return!1},function(n,a){return L(n,a)},function(){throw new Error("cannot encode never")})||this;return o._tag="NeverType",o}return t}(y);new Ft;var qt=function(e){h(t,e);function t(){var o=e.call(this,"any",function(n){return!0},S,D)||this;return o._tag="AnyType",o}return t}(y);new qt;var Kt=function(e){h(t,e);function t(){var o=e.call(this,"object",function(n){return n!==null&&typeof n=="object"},function(n,a){return o.is(n)?S(n):L(n,a)},D)||this;return o._tag="ObjectType",o}return t}(y);new Kt;function Ce(e,t,o){return o===void 0&&(o="("+e.name+" | "+Mt(t)+")"),new Pt(o,function(n){return e.is(n)&&t(n)},function(n,a){var i=e.validate(n,a);if($e(i))return i;var l=i.right;return t(l)?S(l):L(l,a)},e.encode,e,t)}Ce(Re,Number.isInteger,"Integer");(function(e){h(t,e);function t(o,n,a,i,l){var s=e.call(this,o,n,a,i)||this;return s.props=l,s._tag="StrictType",s}return t})(y);const zt=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Yt=Me(Nt,e=>zt.test(e),"Email"),Qt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Gt=r("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("circle",{cx:"12",cy:"12",r:"1"})],-1),Zt=[Gt];function Jt(e,t){return v(),f("svg",Qt,Zt)}const K={name:"lucide-circle-dot",render:Jt},Xt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},en=r("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1),tn=[en];function nn(e,t){return v(),f("svg",Xt,tn)}const z={name:"lucide-circle",render:nn},on={key:0,class:"flex items-center justify-center p-4"},an={key:1,class:"flex flex-col"},sn={class:"flex items-center justify-between flex-1 pt-4"},rn=r("label",{for:"memberList",class:"p-4"}," Add members ",-1),ln={class:"flex"},cn={class:"border rounded divide-y divide-dividerLight border-divider"},un={class:"select-wrapper"},dn=["name","value"],mn=["onKeyup"],vn={class:"flex"},fn={key:0,class:"flex flex-col items-center justify-center p-4 text-secondaryLight"},pn=["src"],hn=r("span",{class:"pb-4 text-center"}," No invites ",-1),_n={key:0,class:"flex flex-col items-start px-4 py-4 mt-4 border rounded border-dividerLight"},yn={class:"flex items-center justify-center px-2 py-1 mb-4 font-semibold border rounded-full bg-primaryDark border-divider"},gn=r("p",null,[r("span",{class:"text-secondaryLight"}," Roles are used to control access to the shared collections. ")],-1),Tn=r("ul",{class:"mt-4 space-y-4"},[r("li",{class:"flex"},[r("span",{class:"w-1/4 font-semibold uppercase truncate text-secondaryDark max-w-16"}," Owner "),r("span",{class:"flex flex-1"}," Owners can add, edit, and delete requests, collections and team members. ")]),r("li",{class:"flex"},[r("span",{class:"w-1/4 font-semibold uppercase truncate text-secondaryDark max-w-16"}," Editor "),r("span",{class:"flex flex-1"}," Editors can add, edit, and delete requests. ")]),r("li",{class:"flex"},[r("span",{class:"w-1/4 font-semibold uppercase truncate text-secondaryDark max-w-16"}," Viewer "),r("span",{class:"flex flex-1"}," Viewers can only view and use requests. ")])],-1),xn={class:"flex space-x-2"},bn=Z({__name:"Invite",props:{show:Boolean,editingTeamID:{type:String,default:null}},emits:["hide-modal","member"],setup(e,{emit:t}){const o=e,{data:n}=De({query:Ke}),a=ee(()=>{var x;return((x=n.value)==null?void 0:x.admin.usersCount)||1e4}),{list:i}=Xe(qe,x=>x.admin.allUsers,x=>x.uid,a.value,{cursor:void 0,take:a.value}),l=ee(()=>i.value.map(x=>x.email)),s=J(),_=T(null),k=T([{key:"",value:W.Viewer}]),V=()=>{k.value.push({key:"",value:W.Viewer})},g=(x,C)=>{k.value[x].value=C},B=x=>{k.value.splice(x,1)},$=T(!1),j=async()=>{$.value=!0;const x=fe(k.value,wt(C=>fe(C,Se(M=>Yt.is(M.key)))),kt(Ne(C=>H(C.key,C.value,o.editingTeamID))));if(Ie(x)){s.error("Invalid User!!"),$.value=!1;return}E()},E=()=>{$.value=!1,k.value=[{key:"",value:W.Viewer}],t("hide-modal")},O=Y(ze),H=async(x,C,M)=>{const p={userEmail:x,role:C,teamID:M};return await O.executeMutation(p).then(u=>{u.error?u.error.toString()=="[GraphQL] user/not_found"?s.error("User not found in the infra!!"):s.error("Failed to add user to the team!!"):(s.success("User is now a member of the team!!"),t("member"))})};return(x,C)=>{const M=de,p=X,c=Ee,u=Te,b=ye("tippy"),R=ve,U=te,F=Ue,Q=oe("tippy");return e.show?(v(),Ae(F,{key:0,dialog:"",title:"Add Member",onClose:E},{body:P(()=>[$.value?(v(),f("div",on,[m(M)])):(v(),f("div",an,[r("div",sn,[rn,r("div",ln,[m(p,{icon:d(Je),label:"Add new",filled:"",onClick:V},null,8,["icon"])])]),r("div",cn,[(v(!0),f(le,null,ce(k.value,(A,I)=>(v(),f("div",{key:`new-member-${I}`,class:"flex divide-x divide-dividerLight"},[m(c,{modelValue:A.key,"onUpdate:modelValue":w=>A.key=w,placeholder:"Email",source:d(l),name:"member"+I,spellcheck:!0,styles:`
                w-full pl-3 bg-neutral-900 border-gray-600
              `,class:"flex-1 !flex",onInput:w=>A.key=w},null,8,["modelValue","onUpdate:modelValue","source","name","onInput"]),r("span",null,[m(b,{interactive:"",trigger:"click",theme:"popover","on-shown":()=>_.value[I].focus()},{content:P(({hide:w})=>[r("div",{ref_for:!0,ref_key:"tippyActions",ref:_,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:ge(q=>w(),["escape"])},[m(u,{label:"OWNER",icon:A.value==="OWNER"?d(K):d(z),active:A.value==="OWNER",onClick:()=>{g(I,d(W).Owner),w()}},null,8,["icon","active","onClick"]),m(u,{label:"EDITOR",icon:A.value==="EDITOR"?d(K):d(z),active:A.value==="EDITOR",onClick:()=>{g(I,d(W).Editor),w()}},null,8,["icon","active","onClick"]),m(u,{label:"VIEWER",icon:A.value==="VIEWER"?d(K):d(z),active:A.value==="VIEWER",onClick:()=>{g(I,d(W).Viewer),w()}},null,8,["icon","active","onClick"])],40,mn)]),default:P(()=>[r("span",un,[r("input",{class:"flex flex-1 px-4 py-2 bg-transparent cursor-pointer",placeholder:"Permissions",name:"value"+I,value:A.value,readonly:""},null,8,dn)])]),_:2},1032,["on-shown"])]),r("div",vn,[ae(m(p,{id:"member",title:"Remove",icon:d(be),color:"red",onClick:w=>B(I)},null,8,["icon","onClick"]),[[Q,{theme:"tooltip"}]])])]))),128)),k.value.length===0?(v(),f("div",fn,[r("img",{src:"/images/states/dark/add_group.svg",loading:"lazy",class:"inline-flex flex-col object-contain object-center w-16 h-16 mb-4"},null,8,pn),hn,m(p,{label:"Add new",filled:"",onClick:V})])):N("",!0)]),k.value.length?(v(),f("div",_n,[r("span",yn,[m(R,{class:"mr-2 text-secondaryLight svg-icons"}),ue(" Roles ")]),gn,Tn])):N("",!0)]))]),footer:P(()=>[r("span",xn,[m(U,{label:"Add Member",outline:"",onClick:j}),m(p,{label:"Cancel",outline:"",filled:"",onClick:E})])]),_:1})):N("",!0)}}}),wn={class:"flex flex-col"},kn={class:"flex flex-col"},In={class:"flex"},$n={class:"border rounded border-divider my-8"},Rn={key:0,class:"flex flex-col items-center justify-center p-4 text-secondaryLight"},Mn=r("span",{class:"pb-4 text-center"}," No members in this team. Add members to this team to collaborate ",-1),Cn={key:1,class:"divide-y divide-dividerLight"},Dn=["name","value"],An={class:"relative"},En=["name","value"],Un={class:"absolute right-4 top-1/2 transform !-translate-y-1/2"},Nn=["onKeyup"],Sn={class:"flex"},jn={key:0,class:"flex flex-col items-center"},Ln={class:"flex"},Vn=Z({__name:"Members",emits:["update-team"],setup(e,{emit:t}){const o=J(),n=T(!1),a=T(),i=T(!0),l=re(),{client:s}=se(),_=async()=>{var u;i.value=!0;const c=await s.query(me,{teamID:l.params.id.toString()}).toPromise();if(c.error)return o.error("Unable to Load Team Info..");(u=c.data)!=null&&u.admin.teamInfo&&(a.value=c.data.admin.teamInfo),i.value=!1};ie(async()=>await _()),je(()=>t("update-team"));const k=()=>{_(),t("update-team")},V=T(null),g=T([]);xe(()=>a.value,c=>{var b;const u=(b=c==null?void 0:c.teamMembers)!=null?b:[];g.value=g.value.filter(R=>u.findIndex(U=>U.user.uid===R.userID)!==-1)});const B=(c,u)=>{const b=g.value.findIndex(R=>R.userID===c);b!==-1?g.value[b].role=u:g.value.push({userID:c,role:u})},$=ee(()=>{var u;return a.value?((u=a.value.teamMembers)!=null?u:[]).map(b=>{var U;const R=g.value.find(F=>F.userID===b.user.uid);return{userID:b.user.uid,email:b.user.email,role:(U=R==null?void 0:R.role)!=null?U:b.role}}):[]}),j=Y(Ye),E=(c,u,b)=>j.executeMutation({userUID:c,teamID:u,newRole:b}),O=T(!1),H=async()=>{O.value=!0,g.value.forEach(async c=>{if(!a.value)return;(await E(c.userID,a.value.id,c.role)).error?(o.error("Role updation has failed!!"),g.value=[]):(o.success("Roles updated successfully!!"),g.value=[]),O.value=!1})},x=Y(Qe),C=(c,u)=>()=>x.executeMutation({userUid:c,teamID:u}),M=T(null),p=async(c,u)=>{var R;if(!a.value)return;M.value=u,(await C(c,a.value.id)()).error?o.error("Member couldn't be removed!!"):(a.value.teamMembers=(R=a.value.teamMembers)==null?void 0:R.filter(U=>U.user.uid!==c),o.success("Member removed successfully!!")),M.value=null,t("update-team")};return(c,u)=>{var A,I;const b=Te,R=ye("tippy"),U=ve,F=bn,Q=oe("tippy");return v(),f("div",wn,[r("div",kn,[r("div",In,[m(d(te),{icon:d(pe),label:"Add Members",filled:"",onClick:u[0]||(u[0]=w=>n.value=!n.value)},null,8,["icon"])]),r("div",$n,[((I=(A=a.value)==null?void 0:A.teamMembers)==null?void 0:I.length)===0?(v(),f("div",Rn,[Mn,m(d(X),{icon:d(pe),label:"Add Members",onClick:u[1]||(u[1]=()=>{n.value=!n.value})},null,8,["icon"])])):(v(),f("div",Cn,[(v(!0),f(le,null,ce(d($),(w,q)=>(v(),f("div",{key:`member-${q}`,class:"flex divide-x divide-dividerLight"},[r("input",{class:"flex flex-1 px-4 py-3 bg-transparent",placeholder:"Email",name:"param"+q,value:w.email,readonly:""},null,8,Dn),r("span",null,[m(R,{interactive:"",trigger:"click",theme:"popover","on-shown":()=>V.value[q].focus()},{content:P(({hide:G})=>[r("div",{ref_for:!0,ref_key:"tippyActions",ref:V,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:ge(wo=>G(),["escape"])},[m(b,{label:"OWNER",icon:w.role==="OWNER"?d(K):d(z),active:w.role==="OWNER",onClick:()=>{B(w.userID,d(W).Owner),G()}},null,8,["icon","active","onClick"]),m(b,{label:"EDITOR",icon:w.role==="EDITOR"?d(K):d(z),active:w.role==="EDITOR",onClick:()=>{B(w.userID,d(W).Editor),G()}},null,8,["icon","active","onClick"]),m(b,{label:"VIEWER",icon:w.role==="VIEWER"?d(K):d(z),active:w.role==="VIEWER",onClick:()=>{B(w.userID,d(W).Viewer),G()}},null,8,["icon","active","onClick"])],40,Nn)]),default:P(()=>[r("span",An,[r("input",{class:"flex flex-1 px-4 py-3 bg-transparent cursor-pointer",placeholder:"Permissions",name:"value"+q,value:w.role,readonly:""},null,8,En),r("span",Un,[m(d(et))])])]),_:2},1032,["on-shown"])]),r("div",Sn,[ae(m(d(X),{id:"member",title:"Remove",icon:d(tt),color:"red",loading:M.value===q,onClick:G=>p(w.userID,q)},null,8,["icon","loading","onClick"]),[[Q,{theme:"tooltip"}]])])]))),128))]))]),!i.value&&!a.value?(v(),f("div",jn,[m(U,{class:"mb-4 svg-icons"}),ue(" Something went wrong. Please try again later. ")])):N("",!0)]),r("div",Ln,[m(d(te),{label:"Save",outline:"",onClick:H})]),m(F,{show:n.value,editingTeamID:d(l).params.id.toString(),onMember:k,onHideModal:u[2]||(u[2]=()=>{n.value=!1})},null,8,["show","editingTeamID"])])}}}),On={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pn=r("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[r("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),r("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1l1-4l9.5-9.5z"})],-1),Bn=[Pn];function Hn(e,t){return v(),f("svg",On,Bn)}const Wn={name:"lucide-edit",render:Hn},Fn={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qn=r("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),r("path",{d:"M17 21v-8H7v8M7 3v5h8"})],-1),Kn=[qn];function zn(e,t){return v(),f("svg",Fn,Kn)}const Yn={name:"lucide-save",render:zn},Qn={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Gn=r("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2m-6 5v6m4-6v6"},null,-1),Zn=[Gn];function Jn(e,t){return v(),f("svg",Qn,Zn)}const Xn={name:"lucide-trash-2",render:Jn},eo={class:"flex flex-col"},to={class:"flex flex-col space-y-8"},no={key:0,class:"flex flex-col space-y-3"},oo=r("label",{class:"text-accentContrast",for:"username"},"Team ID",-1),ao={class:"w-full p-3 bg-divider rounded-md"},so={key:1,class:"flex flex-col space-y-3"},ro=r("label",{class:"text-accentContrast",for:"teamname"},"Team Name ",-1),io=["disabled"],lo={key:2,class:"flex flex-col space-y-3"},co=r("label",{class:"text-accentContrast",for:"username"},"Number of Members",-1),uo={class:"w-full p-3 bg-divider rounded-md"},mo={class:"flex justify-start mt-8"},vo=Z({__name:"Details",props:{team:null,teamName:null,showRenameInput:{type:Boolean}},emits:["delete-team","rename-team","update:showRenameInput"],setup(e,{emit:t}){const o=e,n=J(),a=T(o.teamName),i=()=>{o.showRenameInput?l():t("update:showRenameInput",!0)},l=()=>{if(a.value.trim()===""){n.error("Team name cannot be empty");return}t("rename-team",a.value)};return(s,_)=>{const k=te,V=oe("focus");return v(),f("div",eo,[r("div",to,[e.team.id?(v(),f("div",no,[oo,r("div",ao,ne(e.team.id),1)])):N("",!0),e.teamName?(v(),f("div",so,[ro,r("div",{class:Le(["flex bg-divider rounded-md items-stretch flex-1 border border-divider",{"!border-accent":e.showRenameInput}])},[ae(r("input",{class:"bg-transparent flex-1 p-3 rounded-md !rounded-r-none disabled:select-none border-r-0 disabled:cursor-default disabled:opacity-50",type:"text","onUpdate:modelValue":_[0]||(_[0]=g=>a.value=g),placeholder:"Team Name",autofocus:"",disabled:!e.showRenameInput},null,8,io),[[Ve,a.value],[V]]),m(k,{class:"!rounded-l-none",filled:"",icon:e.showRenameInput?d(Yn):d(Wn),label:e.showRenameInput?"Rename":"Edit",onClick:_[1]||(_[1]=g=>i())},null,8,["icon","label"])],2)])):N("",!0),e.team.teamMembers.length?(v(),f("div",lo,[co,r("div",uo,ne(e.team.teamMembers.length),1)])):N("",!0)]),r("div",mo,[m(k,{class:"!bg-red-600 !hover:opacity-80",filled:"",label:"Delete Team",onClick:_[2]||(_[2]=g=>e.team&&s.$emit("delete-team",e.team.id)),icon:d(Xn)},null,8,["icon"])])])}}}),fo={class:"flex flex-col"},po={key:0,class:"flex justify-center"},ho={key:1,class:"flex flex-col"},_o={class:"flex items-center space-x-4"},yo={class:"flex justify-center items-center space-x-3"},go={class:"text-lg text-accentContrast"},To=r("span",null,"/",-1),xo={class:"text-lg text-accentContrast"},bo={class:"py-8"},Ao=Z({__name:"_id",setup(e){const t=J(),o=T("details"),n=ee(()=>{switch(o.value){case"details":return"Team details";case"members":return"Team members";case"invites":return"Pending invites";default:return""}}),a=T(),i=T(""),l=re(),s=T(!0),{client:_}=se(),k=async()=>{var c;s.value=!0;const p=await _.query(me,{teamID:l.params.id.toString()}).toPromise();if(p.error)return t.error("Unable to load team info..");(c=p.data)!=null&&c.admin.teamInfo&&(a.value=p.data.admin.teamInfo,i.value=a.value.name),s.value=!1};ie(async()=>await k());const V=async()=>await k(),g=T(!1),B=Y(Ge),$=async p=>{if(!a.value)return;if(a.value.name===p){g.value=!1;return}const c={uid:a.value.id,name:p};await B.executeMutation(c).then(u=>{u.error?t.error("Failed to rename team!!"):(g.value=!1,a.value&&(a.value.name=p,t.success("Team renamed successfully!!")))})},j=Oe(),E=T(!1),O=Y(Ze),H=T(null),x=p=>{E.value=!0,H.value=p},C=async p=>{if(!p){E.value=!1,t.error("Team deletion failed!!");return}const c={uid:p};await O.executeMutation(c).then(u=>{u.error?t.error("Team deletion failed!!"):t.success("Team deleted successfully!!")}),E.value=!1,H.value=null,j.push("/teams")},M=T([]);return xe(()=>a.value,p=>{var u;const c=(u=p==null?void 0:p.teamMembers)!=null?u:[];M.value=M.value.filter(b=>c.findIndex(R=>R.user.uid===b.userID)!==-1)}),(p,c)=>{const u=de,b=Be,R=vo,U=He,F=Vn,Q=bt,A=We;return v(),f("div",fo,[s.value?(v(),f("div",po,[m(u)])):N("",!0),a.value?(v(),f("div",ho,[r("div",_o,[r("button",{class:"p-2 rounded-3xl bg-divider hover:bg-dividerDark transition flex justify-center items-center",onClick:c[0]||(c[0]=I=>d(j).push("/teams"))},[m(b,{class:"text-xl"})]),r("div",yo,[r("h1",go,ne(a.value.name),1),To,r("h2",xo,ne(d(n)),1)])]),r("div",bo,[m(d(Pe),{modelValue:o.value,"onUpdate:modelValue":c[3]||(c[3]=I=>o.value=I),"render-inactive-tabs":""},{default:P(()=>[m(U,{id:"details",label:"Details"},{default:P(()=>[m(R,{team:a.value,teamName:i.value,showRenameInput:g.value,"onUpdate:showRenameInput":c[1]||(c[1]=I=>g.value=I),onRenameTeam:$,onDeleteTeam:x,class:"py-8 px-4"},null,8,["team","teamName","showRenameInput"])]),_:1}),m(U,{id:"members",label:"Members"},{default:P(()=>[m(F,{onUpdateTeam:c[2]||(c[2]=I=>V()),class:"py-8 px-4"})]),_:1}),m(U,{id:"invites",label:"Invites"},{default:P(()=>[m(Q,{editingTeamID:a.value.id,class:"py-8 px-4"},null,8,["editingTeamID"])]),_:1})]),_:1},8,["modelValue"]),m(A,{show:E.value,title:`Confirm Deletion of ${a.value.name} team?`,onHideModal:c[4]||(c[4]=I=>E.value=!1),onResolve:c[5]||(c[5]=I=>C(H.value))},null,8,["show","title"])])])):N("",!0)])}}});export{Ao as default};
