import{f as y,cO as k,cP as D,cn as b,V as p,aR as r,g as j,cQ as I,a6 as S,D as w,cR as L,aN as $,cS as C,p as T,cT as U,cU as q,a9 as E,_ as H,o as i,d as a,a as n,e as t,t as s,c as B,s as l,cV as P,cp as R,ar as N,x as V,cx as A}from"./index.d0a044cd.js";const M=y({layout:"empty",setup(){const e=E(),o=k({query:D,variables:{inviteID:e.query.id},defer:!0});b(()=>{typeof e.query.id=="string"&&o.execute({inviteID:e.query.id})});const d=p(r.auth.getProbableUserStream(),r.auth.getProbableUser()),c=p(r.auth.getCurrentUserStream(),r.auth.getCurrentUser()),m=j(()=>d.value?!c.value:!1);return{E:I,inviteDetails:o,loadingCurrentUser:m,currentUser:c,toast:S(),t:w(),IconHome:L,invokeAction:$}},data(){return{invalidLink:!1,loading:!1,revokedLink:!1,inviteID:"",joinTeamSuccess:!1}},beforeMount(){C()},mounted(){typeof this.$route.query.id=="string"&&(this.inviteID=this.$route.query.id),this.invalidLink=!this.inviteID},methods:{joinTeam(){this.loading=!0,T(q(this.inviteID),U(()=>{this.loading=!1,this.toast.error(`${this.t("error.something_went_wrong")}`)},()=>{this.joinTeamSuccess=!0,this.loading=!1}))()},getErrorMessage(e){if(e.type==="network_error")return this.t("error.network_error");switch(e.error){case"team_invite/not_valid_viewer":return this.t("team.not_valid_viewer");case"team_invite/not_found":return this.t("team.not_found");case"team_invite/no_invite_found":return this.t("team.no_invite_found");case"team_invite/already_member":return this.t("team.already_member");case"team_invite/email_do_not_match":return this.t("team.email_do_not_match");default:return this.t("error.something_went_wrong")}}}}),O={class:"flex flex-col items-center justify-between min-h-screen"},Q={key:0,class:"flex flex-col items-center justify-center flex-1"},G={class:"text-center heading"},z={class:"mt-2 text-center"},F={key:1,class:"flex flex-col items-center justify-center flex-1 p-4"},W={key:2,class:"flex flex-col items-center justify-center flex-1 p-4"},J={class:"heading"},K={class:"mt-2"},X={key:3,class:"flex flex-col items-center justify-center flex-1 p-4"},Y={key:0,class:"flex flex-col items-center justify-center flex-1 p-4"},Z={key:1},x={key:0,class:"flex flex-col items-center p-4"},ee={class:"flex flex-col items-center p-4 mt-8 border rounded border-dividerLight"},te={class:"mb-4"},ie={class:"flex"},ae={key:1,class:"flex flex-col items-center justify-center flex-1 p-4"},se={class:"heading"},ne={class:"mt-2 text-secondaryLight"},oe={class:"mt-8"},re={key:2,class:"flex flex-col items-center justify-center flex-1 p-4"},le={class:"heading"},ce={class:"mt-2 text-secondaryLight"},de={class:"mt-8"},me={class:"p-4"};function ue(e,o,d,c,m,_e){var v;const u=P,_=R,h=N,g=A,f=V;return i(),a("div",O,[e.invalidLink?(i(),a("div",Q,[n(u,{class:"mb-2 opacity-75 svg-icons"}),t("h1",G,s(e.t("team.invalid_invite_link")),1),t("p",z,s(e.t("team.invalid_invite_link_description")),1)])):e.loadingCurrentUser?(i(),a("div",F,[n(_)])):e.currentUser===null?(i(),a("div",W,[t("h1",J,s(e.t("team.login_to_continue")),1),t("p",K,s(e.t("team.login_to_continue_description")),1),n(h,{label:e.t("auth.login_to_hoppscotch"),class:"mt-8",onClick:o[0]||(o[0]=he=>e.invokeAction("modals.login.toggle"))},null,8,["label"])])):(i(),a("div",X,[e.inviteDetails.loading?(i(),a("div",Y,[n(_)])):(i(),a("div",Z,[!e.inviteDetails.loading&&e.E.isLeft(e.inviteDetails.data)?(i(),a("div",x,[n(u,{class:"mb-4 svg-icons"}),t("p",null,s(e.getErrorMessage(e.inviteDetails.data.left)),1),t("p",ee,[t("span",te,s(e.t("team.logout_and_try_again")),1),t("span",ie,[e.inviteDetails.data.left.type==="gql_error"?(i(),B(g,{key:0,outline:""})):l("",!0)])])])):l("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&!e.joinTeamSuccess?(i(),a("div",ae,[t("h1",se,s(e.t("team.join_team",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",ne,s(e.t("team.invited_to_team",{owner:(v=e.inviteDetails.data.right.teamInvitation.creator.displayName)!=null?v:e.inviteDetails.data.right.teamInvitation.creator.email,team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",oe,[n(h,{label:e.t("team.join_team",{team:e.inviteDetails.data.right.teamInvitation.team.name}),loading:e.loading,disabled:e.revokedLink,onClick:e.joinTeam},null,8,["label","loading","disabled","onClick"])])])):l("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&e.joinTeamSuccess?(i(),a("div",re,[t("h1",le,s(e.t("team.joined_team",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",ce,s(e.t("team.joined_team_description",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",de,[n(f,{to:"/",icon:e.IconHome,filled:"",label:e.t("app.home")},null,8,["icon","label"])])])):l("",!0)]))])),t("div",me,[n(f,{class:"tracking-wide !font-bold !text-secondaryDark",label:"HOPPSCOTCH",to:"/"})])])}const ve=H(M,[["render",ue]]);export{ve as default};
//# sourceMappingURL=join-team.534c8da9.js.map
