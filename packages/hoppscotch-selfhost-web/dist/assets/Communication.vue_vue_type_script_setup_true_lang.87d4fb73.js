import{o as d,d as _,e as o,f as W,D as P,j as i,W as Y,g as L,aS as U,aZ as Z,b9 as G,N as C,a as c,k as r,v as Q,l as e,s as O,t as T,w as S,m as X,n as ee,q as te,aH as oe,c as $,Y as ne,ba as se,ak as le,b3 as ae,p as ie,bb as ce,I as A,b5 as re,x as de,r as ue,bc as pe,z as me,a6 as ve,H as fe}from"./index.d0a044cd.js";import{u as _e,I as ye}from"./utils.a018fd3f.js";import{l as he,I as ke,a as xe}from"./json.c2861aa3.js";import{c as be,f as ge}from"./TaskOption.ecbd7dd2.js";import{r as we}from"./files.da100569.js";const Ce={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Se=o("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[o("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),o("circle",{cx:"5",cy:"19",r:"1"})],-1),$e=[Se];function Ie(m,b){return d(),_("svg",Ce,$e)}const Ne={name:"lucide-rss",render:Ie},Be={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},He=o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M22 2L11 13M22 2l-7 20l-4-9l-9-4l20-7z"},null,-1),Me=[He];function je(m,b){return d(),_("svg",Be,Me)}const Le={name:"lucide-send",render:je},Oe={class:"flex flex-col flex-1"},Te=["placeholder"],Ae={class:"flex items-center"},Fe={class:"font-semibold truncate text-secondaryLight"},qe={class:"select-wrapper"},Ee=["onKeyup"],Je={class:"flex"},ze={for:"payload"},Pe=W({__name:"Communication",props:{showEventField:{type:Boolean,default:!1},eventFieldStyles:{type:String,default:""},stickyHeaderStyles:{type:String,default:""},isConnected:{type:Boolean,default:!1}},emits:["send-message"],setup(m,{emit:b}){const t=P(),g=ve(),I=i(null),y=i(!0),N=i(),B=i(),w=Y(xe,1e3),h=i(!1),H={JSON:"application/ld+json",Raw:"text/plain"},F=Object.keys(H),s=i("JSON"),k=i(""),l=i(""),q=L(()=>H[s.value]),E=L(()=>U(s.value)?he:null);_e(N,l,Z({extendedEditorConfig:{lineWrapping:y,mode:q,placeholder:t("websocket.message").toString()},linter:E,completer:null,environmentHighlights:!0}));const M=()=>{h.value&&(l.value="",k.value="")},j=()=>{!l.value||(b("send-message",{eventName:k.value,message:l.value}),M())},J=async v=>{var x;const n=await ie((x=v.target.files)==null?void 0:x[0],ge,be(we))();ce(n)?(l.value=n.value,g.success(`${t("state.file_imported")}`)):g.error(`${t("action.choose_file")}`)},z=()=>{try{const v=JSON.parse(l.value);l.value=JSON.stringify(v,null,2),w.value=A}catch(v){console.error(v),w.value=re,g.error(`${t("error.json_prettify_invalid_body")}`)}};return G("request.send-cancel",j),(v,n)=>{const x=Ne,u=de,D=fe,R=ue("tippy"),V=pe,p=me("tippy");return d(),_("div",Oe,[m.showEventField?(d(),_("div",{key:0,class:C(["sticky z-10 flex items-center justify-center flex-shrink-0 overflow-x-auto border-b bg-primary border-dividerLight",m.eventFieldStyles])},[c(x,{class:"mx-4 svg-icons text-accentLight"}),r(o("input",{id:"event_name","onUpdate:modelValue":n[0]||(n[0]=a=>k.value=a),class:"w-full py-2 pr-4 truncate bg-primary",name:"event_name",placeholder:`${e(t)("socketio.event_name")}`,type:"text",autocomplete:"off"},null,8,Te),[[Q,k.value]])],2)):O("",!0),o("div",{class:C(["sticky z-10 flex items-center justify-between flex-shrink-0 pl-4 overflow-x-auto border-b bg-primary border-dividerLight",m.stickyHeaderStyles])},[o("span",Ae,[o("label",Fe,T(e(t)("websocket.message")),1),c(R,{interactive:"",trigger:"click",theme:"popover","on-shown":()=>I.value.focus()},{content:S(({hide:a})=>[o("div",{ref_key:"tippyActions",ref:I,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:X(f=>a(),["escape"])},[(d(!0),_(ee,null,te(e(F),(f,K)=>(d(),$(D,{key:`contentTypeItem-${K}`,label:f,"info-icon":f===s.value?e(A):void 0,"active-info-icon":f===s.value,onClick:()=>{s.value=f,a()}},null,8,["label","info-icon","active-info-icon","onClick"]))),128))],40,Ee)]),default:S(()=>[o("span",qe,[c(u,{label:s.value||e(t)("state.none").toLowerCase(),class:"pr-8 ml-2 rounded-none"},null,8,["label"])])]),_:1},8,["on-shown"])]),o("div",Je,[r(c(u,{title:`${e(t)("request.run")} <kbd>${e(oe)()}</kbd><kbd>\u21A9</kbd>`,label:`${e(t)("action.send")}`,disabled:!l.value||!m.isConnected,icon:e(Le),class:"rounded-none !text-accent !hover:text-accentDark",onClick:n[1]||(n[1]=a=>j())},null,8,["title","label","disabled","icon"]),[[p,{theme:"tooltip",delay:[500,20],allowHTML:!0}]]),r((d(),$(V,{on:h.value,class:"px-2",title:`${e(t)("mqtt.clear_input_on_send")}`,onChange:n[2]||(n[2]=a=>h.value=!h.value)},{default:S(()=>[ne(T(e(t)("mqtt.clear_input")),1)]),_:1},8,["on","title"])),[[p,{theme:"tooltip"}]]),r(c(u,{to:"https://docs.hoppscotch.io/documentation/features/realtime-api-testing",blank:"",title:e(t)("app.wiki"),icon:e(se)},null,8,["title","icon"]),[[p,{theme:"tooltip"}]]),r(c(u,{title:e(t)("action.clear"),icon:e(le),onClick:M},null,8,["title","icon"]),[[p,{theme:"tooltip"}]]),r(c(u,{title:e(t)("state.linewrap"),class:C({"!text-accent":y.value}),icon:e(ye),onClick:n[3]||(n[3]=ae(a=>y.value=!y.value,["prevent"]))},null,8,["title","class","icon"]),[[p,{theme:"tooltip"}]]),s.value&&s.value=="JSON"?r((d(),$(u,{key:0,title:e(t)("action.prettify"),icon:e(w),onClick:z},null,8,["title","icon"])),[[p,{theme:"tooltip"}]]):O("",!0),o("label",ze,[r(c(u,{title:e(t)("import.title"),icon:e(ke),onClick:n[4]||(n[4]=a=>B.value.click())},null,8,["title","icon"]),[[p,{theme:"tooltip"}]])]),o("input",{ref_key:"payload",ref:B,class:"input",name:"payload",type:"file",onChange:J},null,544)])],2),o("div",{ref_key:"wsCommunicationBody",ref:N,class:"flex flex-col flex-1"},null,512)])}}});export{Pe as _,Ne as a};
//# sourceMappingURL=Communication.vue_vue_type_script_setup_true_lang.87d4fb73.js.map
