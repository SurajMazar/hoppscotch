{"version":3,"file":"_id.8527bb3c.js","sources":["../../../hoppscotch-common/src/pages/r/_id.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col items-center justify-between\">\n    <div\n      v-if=\"invalidLink\"\n      class=\"flex flex-col items-center justify-center flex-1\"\n    >\n      <icon-lucide-alert-triangle class=\"mb-2 opacity-75 svg-icons\" />\n      <h1 class=\"text-center heading\">\n        {{ t(\"error.invalid_link\") }}\n      </h1>\n      <p class=\"mt-2 text-center\">\n        {{ t(\"error.invalid_link_description\") }}\n      </p>\n      <p class=\"mt-4\">\n        <HoppButtonSecondary\n          to=\"/\"\n          :icon=\"IconHome\"\n          filled\n          :label=\"t('app.home')\"\n        />\n      </p>\n    </div>\n    <div v-else class=\"flex flex-col items-center justify-center flex-1 p-4\">\n      <div\n        v-if=\"shortcodeDetails.loading\"\n        class=\"flex flex-col items-center justify-center flex-1 p-4\"\n      >\n        <HoppSmartSpinner />\n      </div>\n      <div v-else>\n        <div\n          v-if=\"!shortcodeDetails.loading && E.isLeft(shortcodeDetails.data)\"\n          class=\"flex flex-col items-center p-4\"\n        >\n          <icon-lucide-alert-triangle class=\"mb-2 opacity-75 svg-icons\" />\n          <h1 class=\"text-center heading\">\n            {{ t(\"error.invalid_link\") }}\n          </h1>\n          <p class=\"mt-2 text-center\">\n            {{ t(\"error.invalid_link_description\") }}\n          </p>\n          <p class=\"mt-4\">\n            <HoppButtonSecondary\n              to=\"/\"\n              :icon=\"IconHome\"\n              filled\n              :label=\"t('app.home')\"\n            />\n            <HoppButtonSecondary\n              :icon=\"IconRefreshCW\"\n              :label=\"t('app.reload')\"\n              filled\n              @click=\"reloadApplication\"\n            />\n          </p>\n        </div>\n        <div\n          v-if=\"!shortcodeDetails.loading && E.isRight(shortcodeDetails.data)\"\n          class=\"flex flex-col items-center justify-center flex-1 p-4\"\n        >\n          <h1 class=\"heading\">\n            {{ t(\"state.loading\") }}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref, watch } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\nimport * as E from \"fp-ts/Either\"\nimport { safelyExtractRESTRequest } from \"@hoppscotch/data\"\nimport { useGQLQuery } from \"@composables/graphql\"\nimport { useI18n } from \"@composables/i18n\"\nimport {\n  ResolveShortcodeDocument,\n  ResolveShortcodeQuery,\n  ResolveShortcodeQueryVariables,\n} from \"~/helpers/backend/graphql\"\n\nimport IconHome from \"~icons/lucide/home\"\nimport IconRefreshCW from \"~icons/lucide/refresh-cw\"\nimport { createNewTab } from \"~/helpers/rest/tab\"\nimport { getDefaultRESTRequest } from \"~/helpers/rest/default\"\nimport { platform } from \"~/platform\"\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst t = useI18n()\n\nconst invalidLink = ref(false)\nconst shortcodeID = ref(\"\")\n\nconst shortcodeDetails = useGQLQuery<\n  ResolveShortcodeQuery,\n  ResolveShortcodeQueryVariables,\n  \"\"\n>({\n  query: ResolveShortcodeDocument,\n  variables: {\n    code: route.params.id.toString(),\n  },\n})\n\nwatch(\n  () => shortcodeDetails.data,\n  () => addRequestToTab()\n)\n\nconst addRequestToTab = () => {\n  if (shortcodeDetails.loading) return\n\n  const data = shortcodeDetails.data\n\n  if (E.isRight(data)) {\n    if (!data.right.shortcode?.request) {\n      invalidLink.value = true\n      return\n    }\n\n    platform.analytics?.logEvent({\n      type: \"HOPP_SHORTCODE_RESOLVED\",\n    })\n\n    const request: unknown = JSON.parse(data.right.shortcode?.request as string)\n\n    createNewTab({\n      request: safelyExtractRESTRequest(request, getDefaultRESTRequest()),\n      isDirty: false,\n    })\n\n    router.push({ path: \"/\" })\n  }\n}\n\nconst reloadApplication = () => {\n  window.location.reload()\n}\n\nonMounted(() => {\n  if (typeof route.params.id === \"string\") {\n    shortcodeID.value = route.params.id\n    shortcodeDetails.execute()\n  }\n  invalidLink.value = !shortcodeID.value\n})\n</script>\n"],"names":["route","useRoute","router","useRouter","t","useI18n","invalidLink","ref","shortcodeID","shortcodeDetails","useGQLQuery","ResolveShortcodeDocument","watch","addRequestToTab","data","E.isRight","_a","_b","platform","request","_c","createNewTab","safelyExtractRESTRequest","getDefaultRESTRequest","reloadApplication","onMounted"],"mappings":"q0BAwFA,MAAAA,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAC,EAAA,EAAA,EACAC,EAAAD,EAAA,EAAA,EAEAE,EAAAC,EAAA,CAIE,MAAAC,EACO,UAAA,CACI,KAAAX,EAAA,OAAA,GAAA,SAAA,CACsB,CACjC,CAAA,EAGFY,EAAA,IAAAH,EAAA,KACyB,IAAAI,EAAA,CACD,EAGxB,MAAAA,EAAA,IAAA,WACE,GAAAJ,EAAA,QAA8B,OAE9B,MAAAK,EAAAL,EAAA,KAEA,GAAAM,EAAAD,CAAA,EAAA,CACE,GAAA,GAAAE,EAAAF,EAAA,MAAA,YAAA,MAAAE,EAAA,SAAA,CACEV,EAAA,MAAA,GACA,MAAA,EAGFW,EAAAC,EAAA,YAAA,MAAAD,EAAA,SAAA,CAA6B,KAAA,yBACrB,GAGR,MAAAE,EAAA,KAAA,OAAAC,EAAAN,EAAA,MAAA,YAAA,YAAAM,EAAA,OAAA,EAEAC,EAAA,CAAa,QAAAC,EAAAH,EAAAI,GAAA,EACuD,QAAA,EACzD,CAAA,EAGXrB,EAAA,KAAA,CAAA,KAAA,GAAA,CAAA,CAAyB,CAC3B,EAGFsB,EAAA,IAAA,CACE,OAAA,SAAA,QAAuB,EAGzB,OAAAC,EAAA,IAAA,CACE,OAAAzB,EAAA,OAAA,IAAA,WACEQ,EAAA,MAAAR,EAAA,OAAA,GACAS,EAAA,QAAA,GAEFH,EAAA,MAAA,CAAAE,EAAA,KAAiC,CAAA"}